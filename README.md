# Assignment 8: Optimizing Morphology and Behavior for Locomotion

This project was created using the Pyrosim library (https://ccappelle.github.io/pyrosim/) and pybullet. Codebase adapted from the MOOC ludobots course (https://www.reddit.com/r/ludobots/).

Video:
https://youtu.be/VI3CLPTfkKo

Examples of random versus evolved creatures:

A random, gen-0 creature whose body is not adapted for locomotion:

<img width="400" alt="random1" src="https://user-images.githubusercontent.com/13933221/221694144-64338d55-535a-4f42-a801-8e4c0b839fc8.png">


An evolved creature whose body and behavior mimicked that of a turtle:

<img width="398" alt="evolved1" src="https://user-images.githubusercontent.com/13933221/221694275-ab0d9a80-a769-4798-8582-cce526de4afa.png">

An evolved creature whose body and behavior mimicked that of a lizard:

<img width="363" alt="evolved2" src="https://user-images.githubusercontent.com/13933221/221694331-67130ca7-cc23-4537-bfe1-25c671bdef34.png">

~~~~~~~~~~
Commands to replicate the content presented in the video:

```python3 search.py [MAX_SEED] [Repetitions]```

e.g.\
```python3 search.py 5 1```

Would sequentially evolve 5 creatures optimizing for locomotion using 5 random seeds, one time. 

```python3 show.py random 7 2```

Would sequentially evolve 7 creatures optimizing for locomotion using 5 random seeds, twice. 

~~~~~~~~~~

In this project, we maximize *absolute average of final X coordinate across all links*. That is, at the end of the simulation, the fitness of a creature is determined by querying each link for its current X position, and taking the absolute value of the average across all links. This fitness function was chosen so that 'taller' or 'longer' creatures would have less of an advantage over more compact ones. 

We repeated our experiment five times, with a population of 25 individuals and for 25 generations of evolution, with the random seeds (1,2,3,4,5). The below plot is the fitness (Y-axis) of the best-performing creature in the current generation (x-axis) across all experiments (labeled by their seed).

![FitnessPlot_13:07:35_12345](https://user-images.githubusercontent.com/13933221/221696090-e6fb1154-7709-4d95-adc6-f219f15d3cb6.png)


As the diagram explains, we adapt our mutation process over time so that earlier mutations are more drastic and later ones are less extreme, so that once we establish sufficient morphologies conducive to locomotion, corresponding behaviors can be fully evolved and adapted. Otherwise, constant mutation of the body would prove deleterious to productive evolution of behavior, as a brain performing well during one generation may be quite hard to adapt to perform better on the next generation if the arrangement or size of limbs has changed.

![Evolution_diagram](https://user-images.githubusercontent.com/13933221/221694699-2589bc14-80ea-4f02-bf9a-497d9fcf198e.jpg)


These creatures are generated by combining a set of rectangular links in random ways (i.e., iteratively attaching them to random faces of each other). As with our 1D Snakes, the green links possess sensors and the blue links do not (this is also randomly determined). In theory, any 3D morphology consisting of links that are not 'too close' together (to minimize intersections) are possible. See the below diagram for a summary of possible creature morphologies. (See the 'snake1d' branch for more details as well.)

Movement is dictated by a fully connected, two-layer neural network connecting sensor neurons to motor neurons. As in the 'creature3d' branch, here are diagrams explaining how bodies and brains are initially formed:

<img width="686" alt="Screen Shot 2023-02-20 at 11 49 15 PM" src="https://user-images.githubusercontent.com/13933221/220258622-8376b12b-f9f1-4205-8d80-3d8d48d825ce.png">\


<img width="1010" alt="Screen Shot 2023-02-20 at 11 59 39 PM" src="https://user-images.githubusercontent.com/13933221/220260113-9e401507-33e3-47fd-8883-a783b080c7e6.png">


